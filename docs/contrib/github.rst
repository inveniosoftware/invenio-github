..
    This file is part of Invenio.
    Copyright (C) 2025 CERN.

    Invenio is free software; you can redistribute it and/or modify it
    under the terms of the MIT License; see LICENSE file for more details.

GitHub
======

To register GitHub as a VCS provider:

* instantiate ``invenio_vcs.contrib.github.GitHubProviderFactory``
* add it into the ``VCS_PROVIDERS`` list
* add it into the ``OAUTHCLIENT_REMOTE_APPS`` and ``OAUTHCLIENT_REST_REMOTE_APPS`` dictionaries under the same key as the ID (``github`` by default).
* configure ``GITHUB_APP_CREDENTIALS`` with your OAuth credentials generated by GitHub.

For more details and a full example, please see `the Usage Guide <../usage>`_.

==================
OAuth registration
==================

To register a GitHub VCS provider, you need to `create an OAuth app <https://github.com/settings/applications/new>`_ in your Developer Settings.

You can enter any details for the app, but the authorization callback URL must be of the form:

.. code-block::

  https://example.com/oauth/authorized/github/

where ``example.com`` is the hostname of your instance and ``github`` is your configured provider ID.

=====================
Special config values
=====================

These optional values can be passed as keys of the ``config`` dictionary in the ``GitHubProviderFactory`` constructor.

* ``shared_secret``: signing secret for the webhook payload. See the `GitHub documentation <https://docs.github.com/en/webhooks/using-webhooks/validating-webhook-deliveries>`_ for more details. Currently, one instance-wide secret is used for all webhooks. In addition, an internal per-repository access token is automatically attached to the webhook URL to validate access.
* ``insecure_ssl``: a boolean to indicate whether GitHub should accept self-signed or otherwise insecure SSl/TLS certificates when attempting to deliver the webhook.
